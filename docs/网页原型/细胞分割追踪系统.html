<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>BioTrack Pro - 细胞分割与自动追踪系统</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
<style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #18181b; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 10px; }
        .glass-panel { background: rgba(24, 24, 27, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(63, 63, 70, 0.5); }
        .active-tab { border-bottom: 2px solid #3b82f6; color: #3b82f6; }
        .video-container { position: relative; overflow: hidden; cursor: crosshair; }
        .scanning-line {
            position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, #10b981, transparent);
            animation: scan 3s linear infinite;
            display: none;
        }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        .cell-highlight { pointer-events: none; position: absolute; border: 2px solid #10b981; border-radius: 50%; box-shadow: 0 0 10px #10b981; }
    </style>
</head>
<body class="bg-zinc-950 text-zinc-200 h-screen overflow-hidden flex flex-col">
<!-- 顶部导航栏 -->
<header class="h-14 border-b border-zinc-800 flex items-center justify-between px-6 bg-zinc-900/50">
<div class="flex items-center gap-3">
<div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white">
<span class="iconify" data-icon="material-symbols:biotech"></span>
</div>
<h1 class="font-bold text-lg tracking-tight">BioTrack <span class="text-blue-500">Pro</span></h1>
<span class="ml-4 px-2 py-0.5 rounded text-xs bg-zinc-800 border border-zinc-700 text-zinc-400">v2.4.0-Stable</span>
</div>
<div class="flex items-center gap-6 text-sm">
<div class="flex items-center gap-2">
<span class="w-2 h-2 rounded-full bg-emerald-500"></span>
<span class="text-zinc-400">系统状态: 运行良好</span>
</div>
<div class="text-zinc-500" id="current-time">2026-02-13 10:00:00</div>
<div class="flex gap-3">
<button class="p-2 hover:bg-zinc-800 rounded-lg transition-colors"><span class="iconify" data-icon="material-symbols:settings-outline"></span></button>
<button class="p-2 hover:bg-zinc-800 rounded-lg transition-colors"><span class="iconify" data-icon="material-symbols:help-outline"></span></button>
</div>
</div>
</header>
<main class="flex-1 flex overflow-hidden">
<!-- 左侧栏：控制面板 (2/12) -->
<aside class="w-72 border-r border-zinc-800 flex flex-col glass-panel">
<div class="p-4 space-y-6 overflow-y-auto custom-scrollbar flex-1">
<!-- 拖拽上传 -->
<section>
<label class="text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block">视频源导入</label>
<div class="border-2 border-dashed border-zinc-700 rounded-xl p-6 flex flex-col items-center justify-center gap-3 hover:border-blue-500 transition-all cursor-pointer bg-zinc-900/40" id="upload-box">
<span class="iconify text-3xl text-zinc-500" data-icon="material-symbols:cloud-upload"></span>
<div class="text-center">
<p class="text-sm font-medium">拖拽或点击上传</p>
<p class="text-[10px] text-zinc-500 mt-1">支持 MP4, AVI, MOV (Max 500MB)</p>
</div>
</div>
<div class="hidden mt-3 p-2 bg-zinc-800/50 border border-zinc-700 rounded-lg flex items-center gap-3" id="file-info">
<span class="iconify text-blue-400" data-icon="material-symbols:video-file"></span>
<div class="overflow-hidden">
<p class="text-xs font-medium truncate">HEK293_Timelapse_03.mp4</p>
<p class="text-[10px] text-zinc-500">145.2 MB</p>
</div>
<button class="ml-auto text-zinc-500 hover:text-red-400" onclick="resetUpload()"><span class="iconify" data-icon="material-symbols:close"></span></button>
</div>
</section>
<!-- 参数设置 -->
<section class="space-y-5">
<label class="text-xs font-semibold text-zinc-500 uppercase tracking-wider block">算法参数配置</label>
<div class="space-y-2">
<div class="flex justify-between text-xs">
<span class="text-zinc-400">分割阈值 (Segmentation)</span>
<span class="text-blue-400" id="threshold-val">0.65</span>
</div>
<input class="w-full h-1.5 bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-blue-500" max="1" min="0" oninput="document.getElementById('threshold-val').innerText = this.value" step="0.01" type="range" value="0.65"/>
</div>
<div class="space-y-2">
<div class="flex justify-between text-xs">
<span class="text-zinc-400">追踪灵敏度 (Tracking)</span>
<span class="text-blue-400" id="tracking-val">0.82</span>
</div>
<input class="w-full h-1.5 bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-blue-500" max="1" min="0" oninput="document.getElementById('tracking-val').innerText = this.value" step="0.01" type="range" value="0.82"/>
</div>
<div class="space-y-2">
<label class="text-xs text-zinc-400 block">最小细胞面积 (px²)</label>
<input class="w-full bg-zinc-900 border border-zinc-700 rounded-lg px-3 py-2 text-sm focus:border-blue-500 outline-none transition-all" type="number" value="120"/>
</div>
<div class="flex items-center gap-2 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg">
<span class="iconify text-blue-400" data-icon="material-symbols:info-outline"></span>
<p class="text-[10px] text-blue-300">建议对 HEK293 细胞系使用 0.6+ 阈值以获得最佳重叠处理效果。</p>
</div>
</section>
</div>
<!-- 操作按钮 -->
<div class="p-4 border-t border-zinc-800 space-y-3">
<button class="w-full py-2.5 bg-zinc-800 text-zinc-500 rounded-lg font-semibold text-sm flex items-center justify-center gap-2 cursor-not-allowed transition-all active:scale-[0.98]" disabled="" id="btn-start">
<span class="iconify" data-icon="material-symbols:play-arrow"></span> 开始分析
                </button>
<div class="flex gap-2">
<button class="flex-1 py-2 bg-zinc-800 text-zinc-500 rounded-lg text-xs font-medium flex items-center justify-center gap-1 opacity-50" disabled="" id="btn-pause">
<span class="iconify" data-icon="material-symbols:pause"></span> 暂停
                    </button>
<div class="relative group flex-1">
<button class="w-full py-2 bg-zinc-800 text-zinc-500 rounded-lg text-xs font-medium flex items-center justify-center gap-1 opacity-50" disabled="" id="btn-export">
                            导出 <span class="iconify" data-icon="material-symbols:keyboard-arrow-down"></span>
</button>
<div class="hidden group-hover:block absolute bottom-full left-0 w-full mb-1 bg-zinc-800 border border-zinc-700 rounded-lg shadow-xl overflow-hidden py-1 z-50">
<button class="w-full px-4 py-2 text-left text-[10px] hover:bg-zinc-700">导出为 CSV</button>
<button class="w-full px-4 py-2 text-left text-[10px] hover:bg-zinc-700">导出为 JSON</button>
<button class="w-full px-4 py-2 text-left text-[10px] hover:bg-zinc-700">标注视频 (MP4)</button>
</div>
</div>
</div>
</div>
</aside>
<!-- 中间栏：视频展示区 (6/12) -->
<section class="flex-1 flex flex-col bg-black">
<!-- 标签页 -->
<div class="h-12 border-b border-zinc-900 bg-zinc-900/30 flex items-center px-4 gap-6">
<button class="text-sm font-medium h-full active-tab px-2">原始视频</button>
<button class="text-sm font-medium h-full text-zinc-500 hover:text-zinc-300 px-2 transition-colors">实时标注 (Overlay)</button>
<div class="ml-auto flex items-center gap-4">
<label class="flex items-center gap-2 cursor-pointer">
<input checked="" class="w-4 h-4 rounded border-zinc-700 bg-zinc-900 accent-blue-500" type="checkbox"/>
<span class="text-xs text-zinc-400">显示 ID 标签</span>
</label>
<div class="h-4 w-[1px] bg-zinc-800"></div>
<div class="text-xs text-zinc-500 flex items-center gap-2">
<span class="iconify" data-icon="material-symbols:grid-on-outline"></span>
                        网格辅助
                    </div>
</div>
</div>
<!-- 视频主体 -->
<div class="flex-1 relative flex items-center justify-center p-8">
<div class="video-container aspect-video max-w-full max-h-full bg-zinc-900 rounded-lg shadow-2xl border border-zinc-800 flex items-center justify-center relative" id="main-view">
<!-- 初始占位 -->
<div class="flex flex-col items-center gap-4 text-zinc-600" id="initial-placeholder">
<span class="iconify text-6xl" data-icon="material-symbols:videocam-off-outline"></span>
<p class="text-sm">等待文件导入...</p>
</div>
<!-- 视频图像 -->
<img alt="Microscope view of cells" class="hidden w-full h-full object-cover" id="video-preview" src="https://modao.cc/agent-py/media/generated_images/2026-02-13/b1364cb087ec407995877f5bb95326bf.jpg"/>
<!-- 扫描线 -->
<div class="scanning-line" id="scanning-line"></div>
<!-- 模拟标注层 (画布) -->
<canvas class="absolute inset-0 pointer-events-none" id="overlay-canvas"></canvas>
<!-- 动态高亮圈 (模拟结果) -->
<div class="absolute border-2 border-dashed border-blue-400 hidden pointer-events-none" id="selection-box"></div>
</div>
<!-- 悬浮快捷信息 -->
<div class="hidden absolute top-12 left-12 p-3 rounded-lg bg-black/60 border border-white/10 backdrop-blur-md text-xs space-y-1" id="floating-stats">
<div class="flex justify-between gap-4"><span class="text-zinc-400">实时细胞数:</span> <span class="text-emerald-400 font-mono">142</span></div>
<div class="flex justify-between gap-4"><span class="text-zinc-400">追踪稳定性:</span> <span class="text-blue-400 font-mono">98.4%</span></div>
<div class="flex justify-between gap-4"><span class="text-zinc-400">处理速率:</span> <span class="text-zinc-400 font-mono">30 FPS</span></div>
</div>
</div>
<!-- 播放控制 -->
<div class="p-4 border-t border-zinc-900 bg-zinc-900/50">
<div class="flex items-center gap-4 mb-3">
<span class="text-[10px] font-mono text-zinc-500">00:12:04</span>
<input class="flex-1 h-1 bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-blue-500" max="100" min="0" type="range" value="35"/>
<span class="text-[10px] font-mono text-zinc-500">00:34:00</span>
</div>
<div class="flex items-center justify-center gap-8">
<button class="text-zinc-500 hover:text-white transition-colors"><span class="iconify text-xl" data-icon="material-symbols:skip-previous"></span></button>
<button class="w-10 h-10 bg-zinc-200 text-black rounded-full flex items-center justify-center hover:bg-white transition-all"><span class="iconify text-2xl" data-icon="material-symbols:play-arrow" id="play-icon"></span></button>
<button class="text-zinc-500 hover:text-white transition-colors"><span class="iconify text-xl" data-icon="material-symbols:skip-next"></span></button>
<div class="absolute right-8 flex items-center gap-4">
<button class="text-zinc-500 hover:text-white"><span class="iconify text-lg" data-icon="material-symbols:screenshot-region"></span></button>
<button class="text-zinc-500 hover:text-white"><span class="iconify text-lg" data-icon="material-symbols:zoom-in"></span></button>
<button class="text-zinc-500 hover:text-white" id="btn-fullscreen"><span class="iconify text-lg" data-icon="material-symbols:fullscreen"></span></button>
</div>
</div>
</div>
</section>
<!-- 右侧栏：数据可视化区 (4/12) -->
<aside class="w-96 border-l border-zinc-800 flex flex-col glass-panel">
<!-- 图表标签 -->
<div class="flex border-b border-zinc-800 overflow-x-auto custom-scrollbar no-underline">
<button class="chart-tab px-4 py-3 text-xs font-medium border-b-2 border-transparent text-zinc-500 whitespace-nowrap active-tab" data-target="morphology" onclick="switchTab('morphology')">形态分布</button>
<button class="chart-tab px-4 py-3 text-xs font-medium border-b-2 border-transparent text-zinc-500 whitespace-nowrap" data-target="timeseries" onclick="switchTab('timeseries')">形态时序</button>
<button class="chart-tab px-4 py-3 text-xs font-medium border-b-2 border-transparent text-zinc-500 whitespace-nowrap" data-target="trajectory" onclick="switchTab('trajectory')">运动轨迹</button>
<button class="chart-tab px-4 py-3 text-xs font-medium border-b-2 border-transparent text-zinc-500 whitespace-nowrap" data-target="kinetics" onclick="switchTab('kinetics')">动力学</button>
</div>
<!-- 图表内容展示 -->
<div class="flex-1 p-4 overflow-y-auto custom-scrollbar space-y-6">
<div class="h-64 w-full bg-zinc-900/50 rounded-xl border border-zinc-800 p-2 relative" id="chart-container">
<div class="absolute inset-0 flex items-center justify-center text-zinc-700 flex-col gap-2" id="chart-placeholder">
<span class="iconify text-4xl" data-icon="material-symbols:bar-chart"></span>
<p class="text-xs">等待分析数据生成...</p>
</div>
<div class="w-full h-full" id="main-chart"></div>
</div>
<!-- 选中细胞信息 -->
<section class="space-y-4">
<div class="flex items-center justify-between">
<h3 class="text-xs font-semibold text-zinc-500 uppercase tracking-wider">当前选中细胞</h3>
<span class="px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400 text-[10px] font-bold">ID: #C-1042</span>
</div>
<div class="grid grid-cols-2 gap-3">
<div class="p-3 bg-zinc-900 border border-zinc-800 rounded-lg">
<p class="text-[10px] text-zinc-500 mb-1">投影面积</p>
<p class="text-sm font-mono font-bold">452.8 <span class="text-[10px] text-zinc-600">μm²</span></p>
</div>
<div class="p-3 bg-zinc-900 border border-zinc-800 rounded-lg">
<p class="text-[10px] text-zinc-500 mb-1">离心率</p>
<p class="text-sm font-mono font-bold">0.42 <span class="text-[10px] text-zinc-600">Score</span></p>
</div>
<div class="p-3 bg-zinc-900 border border-zinc-800 rounded-lg">
<p class="text-[10px] text-zinc-500 mb-1">平均流速</p>
<p class="text-sm font-mono font-bold">12.4 <span class="text-[10px] text-zinc-600">μm/min</span></p>
</div>
<div class="p-3 bg-zinc-900 border border-zinc-800 rounded-lg">
<p class="text-[10px] text-zinc-500 mb-1">形态稳定性系数</p>
<p class="text-sm font-mono font-bold">0.89 <span class="text-[10px] text-zinc-600">Ratio</span></p>
</div>
</div>
<div class="p-4 bg-zinc-900 border border-zinc-800 rounded-lg space-y-3">
<p class="text-[10px] text-zinc-500 uppercase">行为模式分析报告</p>
<div class="flex items-center gap-3">
<span class="iconify text-emerald-400 text-xl" data-icon="material-symbols:psychology-alt"></span>
<p class="text-xs text-zinc-300">观察到<span class="text-emerald-400 font-bold">准周期性收缩</span>，指示细胞处于正常迁徙活跃期。无凋亡前兆信号。</p>
</div>
<div class="w-full bg-zinc-800 rounded-full h-1">
<div class="bg-emerald-500 h-1 rounded-full w-[85%]"></div>
</div>
<div class="flex justify-between text-[10px] text-zinc-500">
<span>凋亡概率: 5%</span>
<span>有丝分裂预测周期: 12.5h</span>
</div>
</div>
</section>
<!-- 实时日志 -->
<section class="space-y-2">
<h3 class="text-xs font-semibold text-zinc-500 uppercase tracking-wider">系统日志</h3>
<div class="bg-black/40 border border-zinc-800 rounded-lg p-3 h-32 overflow-y-auto font-mono text-[10px] text-zinc-500 space-y-1 custom-scrollbar">
<p class="text-zinc-600">[2026-02-13 10:12:01] <span class="text-blue-500">INFO</span>: 成功加载 H.264 视频流解码器</p>
<p class="text-zinc-600">[2026-02-13 10:12:05] <span class="text-blue-500">INFO</span>: 检测到 GPU 加速器 (RTX 4090) 已挂载</p>
<p class="text-zinc-600">[2026-02-13 10:12:10] <span class="text-emerald-500">SUCCESS</span>: 系统就绪，等待用户指令</p>
<div id="dynamic-logs"></div>
</div>
</section>
</div>
</aside>
</main>
<!-- 底部状态栏 -->
<footer class="h-8 border-t border-zinc-800 px-4 flex items-center justify-between text-[10px] text-zinc-500 bg-zinc-900 font-mono">
<div class="flex items-center gap-4">
<div class="flex items-center gap-1"><span class="iconify" data-icon="material-symbols:memory"></span> GPU 负载: 12%</div>
<div class="flex items-center gap-1"><span class="iconify" data-icon="material-symbols:database-outline"></span> 显存占用: 4.2GB / 24GB</div>
</div>
<div class="flex items-center gap-6">
<div class="flex items-center gap-1">分析进度: <span id="progress-val">0%</span></div>
<div class="w-32 bg-zinc-800 h-1.5 rounded-full overflow-hidden">
<div class="bg-blue-600 h-full w-0 transition-all duration-300" id="progress-bar"></div>
</div>
<span class="text-zinc-400">FPS: 60.0</span>
</div>
</footer>
<script>
        // 全局状态
        let state = 'initial'; // initial, uploaded, analyzing, completed
        let myChart = null;

        // 初始化时间
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').innerText = now.toLocaleString('zh-CN', {
                year: 'numeric', month: '2-digit', day: '2-digit',
                hour: '2-digit', minute: '2-digit', second: '2-digit',
                hour12: false
            });
        }
        setInterval(updateTime, 1000);
        updateTime();

        // 模拟上传逻辑
        const uploadBox = document.getElementById('upload-box');
        uploadBox.addEventListener('click', () => {
            if (state === 'initial') {
                simulateUpload();
            }
        });

        function simulateUpload() {
            uploadBox.style.opacity = '0.5';
            setTimeout(() => {
                state = 'uploaded';
                uploadBox.classList.add('hidden');
                document.getElementById('file-info').classList.remove('hidden');
                document.getElementById('initial-placeholder').classList.add('hidden');
                document.getElementById('video-preview').classList.remove('hidden');
                
                const btnStart = document.getElementById('btn-start');
                btnStart.disabled = false;
                btnStart.className = "w-full py-2.5 bg-blue-600 text-white rounded-lg font-semibold text-sm flex items-center justify-center gap-2 hover:bg-blue-500 transition-all active:scale-[0.98]";
            }, 800);
        }

        function resetUpload() {
            state = 'initial';
            uploadBox.classList.remove('hidden');
            uploadBox.style.opacity = '1';
            document.getElementById('file-info').classList.add('hidden');
            document.getElementById('video-preview').classList.add('hidden');
            document.getElementById('initial-placeholder').classList.remove('hidden');
            document.getElementById('btn-start').disabled = true;
            document.getElementById('btn-start').className = "w-full py-2.5 bg-zinc-800 text-zinc-500 rounded-lg font-semibold text-sm flex items-center justify-center gap-2 cursor-not-allowed";
        }

        // 模拟分析逻辑
        const btnStart = document.getElementById('btn-start');
        btnStart.addEventListener('click', () => {
            if (state === 'uploaded') {
                startAnalysis();
            }
        });

        function startAnalysis() {
            state = 'analyzing';
            btnStart.innerHTML = '<span class="iconify animate-spin" data-icon="material-symbols:refresh"></span> 分析中...';
            btnStart.classList.replace('bg-blue-600', 'bg-zinc-800');
            document.getElementById('scanning-line').style.display = 'block';
            document.getElementById('floating-stats').classList.remove('hidden');
            
            document.getElementById('btn-pause').disabled = false;
            document.getElementById('btn-pause').style.opacity = '1';
            document.getElementById('btn-pause').classList.replace('text-zinc-500', 'text-zinc-200');

            document.getElementById('chart-placeholder').classList.add('hidden');
            initChart();

            // 模拟进度
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 5;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    completeAnalysis();
                }
                document.getElementById('progress-val').innerText = Math.floor(progress) + '%';
                document.getElementById('progress-bar').style.width = progress + '%';
                
                // 模拟日志
                if (Math.random() > 0.7) {
                    const logs = document.getElementById('dynamic-logs');
                    const p = document.createElement('p');
                    p.innerHTML = `[${new Date().toLocaleTimeString()}] <span class="text-amber-500">PROC</span>: 关联细胞 #${Math.floor(Math.random()*1000)} 的轨迹分量...`;
                    logs.prepend(p);
                }

                // 实时更新图表模拟
                if (myChart) {
                    updateChartData();
                }
            }, 500);
        }

        function completeAnalysis() {
            state = 'completed';
            btnStart.innerHTML = '<span class="iconify text-emerald-400" data-icon="material-symbols:check-circle"></span> 分析完成';
            document.getElementById('scanning-line').style.display = 'none';
            document.getElementById('btn-export').disabled = false;
            document.getElementById('btn-export').style.opacity = '1';
            document.getElementById('btn-export').classList.replace('text-zinc-500', 'text-zinc-200');
            
            // 渲染一些模拟的细胞圈
            const mainView = document.getElementById('main-view');
            for(let i=0; i<8; i++) {
                const dot = document.createElement('div');
                dot.className = 'cell-highlight';
                dot.style.width = (20 + Math.random()*30) + 'px';
                dot.style.height = dot.style.width;
                dot.style.left = (20 + Math.random()*60) + '%';
                dot.style.top = (20 + Math.random()*60) + '%';
                mainView.appendChild(dot);
            }
        }

        // 图表模块
        function initChart() {
            myChart = echarts.init(document.getElementById('main-chart'));
            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis' },
                grid: { left: '10%', right: '5%', bottom: '15%', top: '10%' },
                xAxis: {
                    type: 'category',
                    data: Array.from({length: 20}, (_, i) => i + 's'),
                    axisLine: { lineStyle: { color: '#3f3f46' } },
                    axisLabel: { color: '#71717a', fontSize: 10 }
                },
                yAxis: {
                    type: 'value',
                    splitLine: { lineStyle: { color: '#27272a' } },
                    axisLabel: { color: '#71717a', fontSize: 10 }
                },
                series: [{
                    name: '细胞面积均值',
                    type: 'line',
                    smooth: true,
                    showSymbol: false,
                    data: Array.from({length: 20}, () => Math.random() * 50 + 400),
                    lineStyle: { color: '#3b82f6', width: 2 },
                    areaStyle: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            { offset: 0, color: 'rgba(59, 130, 246, 0.3)' },
                            { offset: 1, color: 'rgba(59, 130, 246, 0)' }
                        ])
                    }
                }]
            };
            myChart.setOption(option);
        }

        function updateChartData() {
            const currentData = myChart.getOption().series[0].data;
            currentData.shift();
            currentData.push(Math.random() * 50 + 400);
            myChart.setOption({ series: [{ data: currentData }] });
        }

        function switchTab(type) {
            document.querySelectorAll('.chart-tab').forEach(btn => {
                btn.classList.remove('active-tab');
                if(btn.dataset.target === type) btn.classList.add('active-tab');
            });

            if (!myChart) return;

            let newOption = {};
            if (type === 'morphology') {
                newOption = {
                    xAxis: { type: 'category' },
                    series: [{ type: 'bar', data: [12, 45, 67, 23, 89, 43], itemStyle: { color: '#3b82f6' } }]
                };
            } else if (type === 'trajectory') {
                newOption = {
                    xAxis: { type: 'value', min: 0, max: 100 },
                    yAxis: { type: 'value', min: 0, max: 100 },
                    series: [{
                        type: 'line',
                        data: Array.from({length:10}, () => [Math.random()*100, Math.random()*100]),
                        lineStyle: { width: 1, color: '#10b981' },
                        symbolSize: 4
                    }]
                };
            } else {
                newOption = {
                    series: [{ type: 'line', data: Array.from({length: 20}, () => Math.random() * 50 + 400) }]
                };
            }
            myChart.setOption(newOption, true);
        }

        // 模拟鼠标选择框
        const mainView = document.getElementById('main-view');
        const selectionBox = document.getElementById('selection-box');
        let isDragging = false;
        let startX, startY;

        mainView.addEventListener('mousedown', (e) => {
            if (state !== 'completed') return;
            isDragging = true;
            const rect = mainView.getBoundingClientRect();
            startX = e.clientX - rect.left;
            startY = e.clientY - rect.top;
            selectionBox.style.left = startX + 'px';
            selectionBox.style.top = startY + 'px';
            selectionBox.style.width = '0px';
            selectionBox.style.height = '0px';
            selectionBox.classList.remove('hidden');
        });

        window.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const rect = mainView.getBoundingClientRect();
            const currentX = e.clientX - rect.left;
            const currentY = e.clientY - rect.top;

            const width = currentX - startX;
            const height = currentY - startY;

            selectionBox.style.width = Math.abs(width) + 'px';
            selectionBox.style.height = Math.abs(height) + 'px';
            selectionBox.style.left = (width > 0 ? startX : currentX) + 'px';
            selectionBox.style.top = (height > 0 ? startY : currentY) + 'px';
        });

        window.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                setTimeout(() => selectionBox.classList.add('hidden'), 500);
            }
        });

        window.addEventListener('resize', () => {
            if (myChart) myChart.resize();
        });
    </script>
</body>
</html>