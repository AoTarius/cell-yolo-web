# 项目日志

## 2.10

模型：
模型验证的流程基本了解，掌握使用方式，并且分别在远程和本地训练以及运行了模型，尚未调整过参数。

下一步规划：
把南大方面四张图绘制的方法研究一下；构思根据模型给出的数据，还有哪些基础信息和图片可以展示，展示方式；
后续会议中列出想到的功能，请教哪些部分多余，哪些部分欠缺。
给项目想一个响亮的名字，列出需要准备的所有内容（如项目本体，演示PPT等），报名参赛。
整理一下上述信息后，简单构筑软件框架，逐步实现功能。

困惑点：
目前参数下，我们如何做到对同一个细胞保持持续的追踪？
我们初步的想法是通过id唯一确定某一个细胞作为追踪目标，但是发现存在id丢失的问题，即对于某一个细胞，即使没有出现分裂或者死亡的现象，模型仍然可能失焦并且在重新识别后给细胞一个新的编号。

## 2.11

初步确定了前端vue，后端django的技术栈，建立了协作项目。
试调整模型验证参数以取得更好的效果。
软件方面下一步设定为基础的上传视频-->处理视频-->展示结果的流程。
参赛方面首先应该定义作品的名称和赛道，准备进行报名。
列出功能以及页面的示例，设计页面原型。

可选赛道：人工智能与大数据应用 Web应用与开发
可选作品名称：
1.基于图像追踪模型的细胞分析系统
2.破解细胞迷雾：智能分割追踪系统
3.CellScope：显微影像智能解析平台
4.Cytotrack：细胞智能追踪与分析系统

## 2.12

设计了前端页面的原型。

## 2.15

**重构 ultralytics 库路径配置**

为解决 ultralytics 和 deep_sort_pytorch 模块导入问题，将原本位于 `model/YOLOv8_Segmentation_DeepSORT_Object_Tracking-main/ultralytics` 的库复制到 `web/libs/ultralytics`，实现所有依赖都在 web 目录内管理。

**主要变更：**

1. **目录结构重组**
   - 新增 `web/libs/ultralytics/` 目录
   - 复制完整的 ultralytics 源码（包含 YOLOv8 和 DeepSORT）
   - 创建 `setup.py` 支持本地安装

2. **Python 路径配置**
   - 在 conda 环境创建 `.pth` 文件：`~/miniconda3/envs/cell-yolo/lib/python3.8/site-packages/ultralytics_local.pth`
   - 在 `backend/settings.py` 中添加 `sys.path` 配置
   - 更新 `.vscode/settings.json` 的 `python.analysis.extraPaths`

3. **依赖管理**
   - 更新 `backend/requirements.txt`，添加 PyTorch、torchvision、psutil 等依赖
   - ultralytics 和 deep_sort_pytorch 使用本地库，无需额外安装

4. **代码修改**
   - `web/backend/api/services/convert_results.py`：更新路径配置，从 5 个 parent 改为 4 个 parent
   - `web/backend/backend/settings.py`：添加 sys.path 自动配置
   - `web/.vscode/settings.json`：更新 Python 路径配置

**解决的问题：**
- ✅ `ModuleNotFoundError: No module named 'ultralytics'`
- ✅ `ModuleNotFoundError: No module named 'deep_sort_pytorch'`
- ✅ VSCode IDE 无法解析导入问题
- ✅ Django 运行时无法找到模块问题

**验证结果：**
- ✅ 命令行导入测试通过
- ✅ Conda 环境导入测试通过
- ✅ convert_results.py 运行正常
- ✅ Django 服务器启动正常

**文档更新：**
- 更新 `web/README.md`：添加 libs 目录说明，更新项目结构和技术栈
- 更新 `web/QUICK-START.md`：添加 ultralytics 本地库说明和验证步骤